// Generated by CoffeeScript 1.3.3
var Yoba;

Yoba = (function() {
  var getMass, getSkin, registerYoba;

  function Yoba(params) {
    var defaultRadius, defaultSpeed, yobaImage;
    yobaImage = new Image();
    yobaImage.src = getSkin();
    defaultRadius = 40;
    defaultSpeed = function() {
      return ~~(Math.random() * 25 + 5);
    };
    this.src = yobaImage;
    this.position = params.position;
    this.radius = params.radius || defaultRadius;
    this.speed = params.speed || defaultSpeed();
    this.mass = getMass(params.radius || defaultRadius);
    this.angle = 0;
    this.textDelay = 0;
    this.text = '';
    registerYoba(this);
  }

  registerYoba = function(self) {
    return Yoba.allYobas.push(self);
  };

  getMass = function(R) {
    var p;
    p = 0.0001;
    return ~~((4 / 3) * Math.PI * R * R * R * p);
  };

  getSkin = function() {
    var path, skins;
    path = "skins/";
    skins = ["1.png", "2.png", "3.png", "4.png"];
    return path + skins[~~(Math.random() * skins.length)];
  };

  Yoba.prototype.redraw = function() {
    return canvas.drawYoba({
      radius: this.radius,
      angle: this.angle,
      src: this.src,
      position: this.position
    });
  };

  Yoba.prototype.startSpeek = function() {
    this.textDelay = 10;
    return this.text = Yoba.getSwearword();
  };

  Yoba.prototype.continueSpeek = function() {
    if (this.textDelay > 0) {
      --this.textDelay;
      return canvas.showTextAt(this.text, this.position, 10);
    }
  };

  Yoba.allYobas = [];

  Yoba.removeYobas = function() {
    return this.allYobas = [];
  };

  Yoba.getSwearword = function() {
    var swearwords;
    swearwords = ["Sooqa", "Krysa", "LOL", "Tvoi mama ebal", "U tebya bugurt", "U vas popka prigorela", "Butthurt", "Lalka", "Sasai", "Pidor"];
    return swearwords[~~(Math.random() * swearwords.length)];
  };

  Yoba.stopScript = function() {
    handler.stop();
    return setTimeout(canvas.showSasai, 1000);
  };

  return Yoba;

})();
